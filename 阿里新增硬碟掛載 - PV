å®Œæ•´æ•™å­¸ï¼šå°‡æ–°ç¡¬ç¢Ÿ /dev/nvme1n1 æ›è¼‰ç‚º /juancashï¼ˆLVM + XFSï¼‰
ğŸªœ æ­¥é©Ÿ 1ï¸âƒ£ï¼šç¢ºèªæ–°ç¡¬ç¢Ÿ
lsblk


è¼¸å‡ºï¼ˆç°¡åŒ–ï¼‰ï¼š

nvme0n1 â”€â”€ å·²ä½¿ç”¨ï¼ˆç³»çµ±ï¼‰
nvme1n1 â”€â”€ 200G æ–°ç¡¬ç¢Ÿ (ç„¡åˆ†å‰²)

ğŸ§± æ­¥é©Ÿ 2ï¸âƒ£ï¼šå»ºç«‹åˆ†å‰²å€ï¼ˆéäº’å‹•å¼ï¼‰

ä½¿ç”¨ parted ä¸€æ¬¡å®Œæˆåˆ†å‰²èˆ‡é¡å‹è¨­å®šï¼š
ç¡¬ç¢Ÿæ ¼å¼MBR
parted -s /dev/nvme1n1 mklabel msdos
parted -s /dev/nvme1n1 mkpart primary 0% 100%
parted -s /dev/nvme1n1 set 1 lvm on

ç¡¬ç¢Ÿæ ¼å¼GPT
parted -s /dev/nvme1n1 mklabel gpt
parted -s /dev/nvme1n1 mkpart primary 0% 100%
parted -s /dev/nvme1n1 set 1 lvm on

é©—è­‰ï¼š

lsblk


æ‡‰çœ‹åˆ° /dev/nvme1n1p1ã€‚

ğŸ§¾ æ­¥é©Ÿ 3ï¸âƒ£ï¼šå»ºç«‹ LVM æ¶æ§‹
å»ºç«‹ Physical Volume
pvcreate /dev/nvme1n1p1

å»ºç«‹ Volume Group
vgcreate vg_data /dev/nvme1n1p1

å»ºç«‹ Logical Volume
lvcreate -n lv_data -l 100%FREE vg_data


é©—è­‰ï¼š

lvs


é¡¯ç¤ºï¼š

LV       VG       Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
lv_data  vg_data  -wi-a----- 200.00g

ğŸ§® æ­¥é©Ÿ 4ï¸âƒ£ï¼šæ ¼å¼åŒ–æª”æ¡ˆç³»çµ±ï¼ˆXFSï¼‰
mkfs.xfs /dev/vg_data/lv_data


XFS é©åˆé«˜ I/Oã€å¤§æª”æ¡ˆï¼ˆHarbor / Docker / è³‡æ–™å­˜æ”¾ç”¨é€”æœ€ä½³ï¼‰ã€‚

ğŸ“‚ æ­¥é©Ÿ 5ï¸âƒ£ï¼šå»ºç«‹æ›è¼‰é»ä¸¦æ›è¼‰
mkdir -p /juancash
mount /dev/vg_data/lv_data /juancash

âœ… æ­¥é©Ÿ 6ï¸âƒ£ï¼šç¢ºèªæ›è¼‰ç‹€æ³
lsblk
df -h /juancash


è¼¸å‡ºï¼š

/dev/mapper/vg_data-lv_data  200G  3.9G  197G   2% /juancash

âš™ï¸ æ­¥é©Ÿ 7ï¸âƒ£ï¼šè¨­å®šé–‹æ©Ÿè‡ªå‹•æ›è¼‰

æŸ¥å‡º UUIDï¼š

blkid /dev/vg_data/lv_data


è¼¸å‡ºï¼š

/dev/mapper/vg_data-lv_data: UUID="feab6b44-a8eb-464d-99a0-8d41909a82a7" TYPE="xfs"


ç·¨è¼¯ /etc/fstabï¼š

vi /etc/fstab


åœ¨æœ€å¾Œæ–°å¢ä¸€è¡Œï¼š

UUID=feab6b44-a8eb-464d-99a0-8d41909a82a7  /juancash  xfs  defaults  0 0


é‡æ–°è¼‰å…¥ systemd è¨­å®šï¼š

systemctl daemon-reload


æ¸¬è©¦æ›è¼‰è¨­å®šï¼š

mount -a
df -h /juancash
